<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Match the Word with Its Reading</title>

<style>
body {
  font-family: "Hiragino Kaku Gothic Pro", "Meiryo", sans-serif;
  background: #fafafa;
  margin: 0;
  padding: 40px 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Title */
.title {
  font-size: 2rem;
  color: #b33a3a;
  margin-bottom: 30px;
  text-align: center;
}

/* White card like screenshot */
.quiz-card {
  background: white;
  width: 100%;
  max-width: 650px;
  border-radius: 20px;
  padding: 40px 30px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
  text-align: center;
}

/* "Question 1 of 20" */
.progress {
  font-size: 1.1rem;
  color: #666;
  margin-bottom: 10px;
}

/* Big question word */
.question {
  font-size: 2.1rem;
  font-weight: 600;
  margin: 20px 0 30px;
}

/* Answer buttons container */
.answers {
  display: flex;
  flex-direction: column;
  gap: 14px;
  margin-bottom: 30px;
}

/* Answer buttons styled like screenshot */
.answers button {
  background: #ffecec;
  border: none;
  border-radius: 12px;
  padding: 15px 10px;
  font-size: 1.4rem;
  cursor: pointer;
  transition: 0.2s ease;
}

.answers button:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

/* Correct / wrong color feedback */
.answers .correct {
  background: #d8f8d8 !important;
}

.answers .wrong {
  background: #ffd2d2 !important;
}

/* Next button */
.next-btn {
  background: #b33a3a;
  color: white;
  border: none;
  padding: 12px 25px;
  border-radius: 12px;
  font-size: 1.1rem;
  cursor: pointer;
  transition: .2s;
}

.next-btn:disabled {
  opacity: 0.5;
  cursor: default;
}

.next-btn:hover:not(:disabled) {
  transform: scale(1.05);
}

/* Score box */
.gift {
  margin-top: 30px;
  font-size: 1.7rem;
  display: none;
}

  .result-gif {
  max-width: 220px;
  border-radius: 10px;
  margin: 15px 0;
}

.result-text {
  font-size: 24px;
  margin-bottom: 10px;
  font-weight: bold;
}

.motivation-text {
  font-size: 18px;
  margin-bottom: 15px;
}

</style>

</head>
<body>

<h1 class="title">Match the Word with Its Reading</h1>

<div id="quiz-box" class="quiz-card">
  <div id="progress" class="progress"></div>
  <div id="question" class="question"></div>
  <div id="answers" class="answers"></div>

  <button id="next-btn" class="next-btn">Next</button>
</div>

<div id="gift" class="gift"></div>

<script>

  /* -------------------------
        DEBUG MODE
        Turn ON to see distractors in console.
        Turn OFF for production.
  --------------------------*/
  const DEBUG = false;

  /* -------------------------
        SHUFFLE FUNCTION
  --------------------------*/
  const shuffle = arr => arr.sort(() => Math.random() - 0.5);

  /* -------------------------
        MAIN QUESTION LIST (YOURS)
  --------------------------*/
  const allQuestions = [
    { word: "ã‚ã„", correct: "ai" },
    { word: "ã‚ãŠ", correct: "ao" },
    { word: "ã‚ã—", correct: "ashi" },
    { word: "ã‚ã›", correct: "ase" },
    { word: "ã‚ã¤ã‹ã†", correct: "atsukau" },
    { word: "ã‚ã¤ã„", correct: "atsui" },
    { word: "ã‚ã", correct: "aku" },
    { word: "ã‚ã„ã“", correct: "aiko" },
    { word: "ã‚ã", correct: "aki" },
    { word: "ã‚ã“ãŽ", correct: "akogi" },
    { word: "ã‚ã’", correct: "age" },
    { word: "ã„ã—", correct: "ishi" },
    { word: "ã„ã™", correct: "isu" },
    { word: "ã„ã‘", correct: "ike" },
    { word: "ã„ã®ã¡", correct: "inochi" },
    { word: "ã„ã—ã", correct: "ishiki" },
    { word: "ã„ã„", correct: "ii" },
    { word: "ã„ã", correct: "iku" },
    { word: "ã„ã‘ã‚“", correct: "iken" },
    { word: "ã†ãŸ", correct: "uta" },
    { word: "ã†ãŸã†", correct: "utau" },
    { word: "ã†ã", correct: "uso" },
    { word: "ã†ã§", correct: "ude" },
    { word: "ã†ã”ã", correct: "ugoku" },
    { word: "ãˆã", correct: "eki" },
    { word: "ãˆã®ã", correct: "enogu" },
    { word: "ãŠã¨", correct: "oto" },
    { word: "ãŠã¨ã“", correct: "otoko" },
    { word: "ãŠã‚“ãª", correct: "onna" },
    { word: "ãŠã«", correct: "oni" },
    { word: "ãŠã", correct: "oku" },
    { word: "ã“ã‚“ãªã‚“", correct: "konnan" },
    { word: "ã‹ã„", correct: "kai" },
    { word: "ã‹ãŠ", correct: "kao" },
    { word: "ã‹ãŽ", correct: "kagi" },
    { word: "ã‹ã", correct: "kaki" },
    { word: "ã‹ã“", correct: "kako" },
    { word: "ã‹ã", correct: "kaku" },
    { word: "ã‹ãœ", correct: "kaze" },
    { word: "ã‹ãŸ", correct: "kata" },
    { word: "ã‹ãŸã¡", correct: "katachi" },
    { word: "ã‹ã¤", correct: "katsu" },
    { word: "ãŒã£ã", correct: "gakki" },
    { word: "ã‹ã©", correct: "kado" },
    { word: "ã‹ã®ã†", correct: "kanou" },
    { word: "ãŒã„", correct: "gai" },
    { word: "ãŒã", correct: "gaku" },
    { word: "ãŒã‘", correct: "gake" },
    { word: "ãŒãã›ã„", correct: "gakusei" },
    { word: "ãŒã„ã“ã", correct: "gaikoku" },
    { word: "ãã", correct: "kiku" },
    { word: "ãã›ã¤", correct: "kisetsu" },
    { word: "ãã¤", correct: "kutsu" },
    { word: "ãã›", correct: "kuse" },
    { word: "ãã«", correct: "kuni" },
    { word: "ã‘ã„", correct: "kei" },
    { word: "ã‘ã‚“", correct: "ken" },
    { word: "ã“ã„", correct: "koi" },
    { word: "ã“ãˆ", correct: "koe" },
    { word: "ã“ã“ã‚", correct: "kokoro" },
    { word: "ã“ã", correct: "koku" },
    { word: "ã“ãã•ã„", correct: "kokusai" },
    { word: "ã”ã", correct: "goku" },
    { word: "ã“ã¨", correct: "koto" },
    { word: "ã“ã‚“ã–ã¤", correct: "konzatsu" },
    { word: "ã•ã‚“", correct: "san" },
    { word: "ã•ã‘", correct: "sake" },
    { word: "ã•ã", correct: "saku" },
    { word: "ã•ã¨", correct: "sato" },
    { word: "ã•ã‹ãª", correct: "sakana" },
    { word: "ã•ãŒã™", correct: "sagasu" },
    { word: "ã•ã‚€ã„", correct: "samui" },
    { word: "ã•ã¤", correct: "satsu" },
    { word: "ã–ã£ã—", correct: "zasshi" },
    { word: "ã—ãŸ", correct: "shita" },
    { word: "ã—ã”ã¨", correct: "shigoto" },
    { word: "ã—ãšã‹", correct: "shizuka" },
    { word: "ã—ã¤", correct: "shitsu" },
    { word: "ã—ã¤ã‚‚ã‚“", correct: "shitsumon" },
    { word: "ã™ã†ãŒã", correct: "suugaku" },
    { word: "ã™ã", correct: "suki" },
    { word: "ã›ã", correct: "seki" },
    { word: "ã›ã‹ã„", correct: "sekai" },
    { word: "ã›ã¤", correct: "setsu" },
    { word: "ãã¨", correct: "soto" },
    { word: "ã‚ãã“", correct: "asoko" },
    { word: "ãžã", correct: "zoku" },
    { word: "ãŸã„", correct: "tai" },
    { word: "ãŸãŠã™", correct: "taosu" },
    { word: "ãŸã", correct: "taku" },
    { word: "ãŸã¡", correct: "tachi" },
    { word: "ãŸã¦", correct: "tate" },
    { word: "ãŸã®ã—ã„", correct: "tanoshii" },
    { word: "ãŸã ã—ã„", correct: "tadashii" },
    { word: "ãŸã­", correct: "tane" },
    { word: "ã ã„ãŒã", correct: "daigaku" },
    { word: "ã ã„ã“ã‚“", correct: "daikon" },
    { word: "ã ã‚“ãª", correct: "danna" },
    { word: "ãªã‚“", correct: "nan" },
    { word: "ã«ã‚“ã’ã‚“", correct: "ningen" }
  ];

  /* -------------------------
        PICK 50 RANDOM QUESTIONS
  --------------------------*/
  const selectedQuestions = shuffle([...allQuestions]).slice(0, 50);

  let current = 0;
  let score = 0;

  const questionEl = document.getElementById("question");
  const answersEl = document.getElementById("answers");
  const nextBtn = document.getElementById("next-btn");
  const giftEl = document.getElementById("gift");

  /* -------------------------
        SAFE DISTRACTOR GENERATOR
  --------------------------*/
  function generateDistractors(correct) {

    let variants = [
      correct.replace(/k/g, "g"),
      correct.replace(/s/g, "z"),
      correct.replace(/a/g, "o"),
      correct.replace(/i/g, "e"),
      correct.replace(/tsu/g, "tu"),
      correct.split("").reverse().join(""),
      correct.replace(/n/g, "m"),
      correct.replace(/o/g, "a"),
      correct.replace(/i/g, "ke"),
      correct.replace(/ke/g, "i"),
      correct.replace(/ko/g, "ta"),
      correct.replace(/da/g, "ta"),
      correct.replace(/ta/g, "da"),
      correct.replace(/ta/g, "ko"),
      correct.replace(/ni/g, "i"),
      correct.replace(/i/g, "ni"),
      correct.replace(/ni/g, "ko"),
      correct.replace(/shi/g, "ji"),
      correct.replace(/ji/g, "shi"),
      correct.replace(/u/g, "tsu"),
      correct.replace(/tsu/g, "u"),
      correct.replace(/ku/g, "gu"),
      correct.replace(/chi/g, "ki"),
      correct.replace(/ki/g, "sa"),
      correct.replace(/sa/g, "chi"),
      correct.replace(/sa/g, "ki"),
      correct.replace(/ki/g, "chi"),
      correct.replace(/ga/g, "ka")
    ];

    // Remove invalid or identical
    variants = variants.filter(v =>
      v && v.length > 0 && v !== correct && v !== ""
    );

    // Fallback in case list becomes too small
    if (variants.length < 3) {
      variants.push(correct + "a", correct + "i", correct + "u");
    }

    const set = new Set([correct]);

    // Build 4 unique answers safely
    while (set.size < 4) {
      const option = variants[Math.floor(Math.random() * variants.length)];
      if (option && option !== correct) set.add(option);
    }

    const result = shuffle([...set]);

    if (DEBUG) {
      console.log(`Word: ${correct} â†’`, result);
    }

    return result;
  }

  /* -------------------------
        SHOW QUESTION
  --------------------------*/
  function showQuestion() {
    const q = selectedQuestions[current];

    document.getElementById("progress").textContent =
      `Question ${current + 1} of ${selectedQuestions.length}`;

    questionEl.textContent = q.word;
    answersEl.innerHTML = "";
    nextBtn.disabled = true;

    const options = generateDistractors(q.correct);

    options.forEach(opt => {
      const btn = document.createElement("button");
      btn.textContent = opt;

      btn.onclick = () => {
        document.querySelectorAll(".answers button").forEach(b => b.disabled = true);

        if (opt === q.correct) {
          btn.classList.add("correct");
          score++;
        } else {
          btn.classList.add("wrong");
        }

        nextBtn.disabled = false;
      };

      answersEl.appendChild(btn);
    });
  }

  /* -------------------------
        NEXT BUTTON
  --------------------------*/
  nextBtn.onclick = () => {
    current++;
    if (current < selectedQuestions.length) {
      showQuestion();
    } else {
  // Hide quiz, show results box
  document.getElementById("quiz-box").style.display = "none";
  giftEl.style.display = "block";
  giftEl.innerHTML = ""; // clear old content

  // Create containers
  const resultText = document.createElement("div");
  resultText.className = "result-text";
  resultText.textContent = `You scored ${score}/${selectedQuestions.length}!`;

  const motivation = document.createElement("div");
  motivation.className = "motivation-text";

  const img = document.createElement("img");
  img.className = "result-gif";

  // GIF links
  const lowGif =
    "https://raw.githubusercontent.com/k58835032-notbot/hiragana-lesson-3-reading/main/sad%20(1).gif";

  const midGif =
    "https://raw.githubusercontent.com/k58835032-notbot/hiragana-lesson-3-reading/9dfe4e3c0835a43c673a94f82005d873295632c4/peach-goma.gif";

  const highGif =
    "https://raw.githubusercontent.com/k58835032-notbot/hiragana-lesson-3-reading/aa252ee2e91e02c223f7e9151aa64f9abe7700e4/peach-goma-peach-and-goma.gif";

  // Pick GIF based on score
  if (score <= selectedQuestions.length * 0.33) {
    img.src = lowGif;
    motivation.textContent = "Keep practicing â€” you can do it! ðŸ’ª";
  } else if (score <= selectedQuestions.length * 0.66) {
    img.src = midGif;
    motivation.textContent = "Nice work! You're improving fast ðŸŒ¸";
  } else {
    img.src = highGif;
    motivation.textContent = "Amazing! You're a Hiragana master ðŸŽ‰";
  }

  // Restart button
  const restartBtn = document.createElement("button");
  restartBtn.textContent = "Restart Quiz";
  restartBtn.id = "next";
  restartBtn.onclick = () => location.reload();

  // Add everything to the gift box
  giftEl.appendChild(resultText);
  giftEl.appendChild(img);
  giftEl.appendChild(motivation);
  giftEl.appendChild(restartBtn);
}

  };

  showQuestion();

</script>
</body>
</html>
